<!DOCTYPE html>
<html lang='en'>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='icon' href='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 10 10%22><text y=%221em%22 font-size=%228%22>‚òï</text></svg>'>
<style>{{ stylesCSS }}</style>
<script type='module'>{{ baselineJS }}</script>
<script type='module' src='/files/static/editor-153f9bcd.js'></script>
<script type='module' src='/files/static/file-43560899.js'></script>
<title>profile{{ if $.Username }} - {{ $.Username }}{{ end }}</title>
<body class='centered-body'>
<nav class='mv2 bg-dark-cyan white flex flex-wrap items-center'>
  <a href='/files/' class='ma2 white'>üñãÔ∏è‚òï notebrew</a>
  <span class='flex-grow-1'></span>
  {{- if not $.UserID.IsZero }}
  <a href='/users/profile/' class='ma2 white'>{{ if $.Username }}profile ({{ $.Username }}){{ else }}profile{{ end }}</a>
  <a href='/users/logout/' class='ma2 white'>logout</a>
  {{- end }}
</nav>
{{- if referer }}
<div><a href='{{ referer }}' data-go-back>&larr; back</a></div>
{{- else }}
<div><a href='/files/'>&larr; back</a></div>
{{- end }}
<fieldset>
  <legend><h2 class='mh2 mv0'>Profile</h2></legend>
  <div>
    <a href='/users/editprofile/'>edit profile</a>
  </div>
  <div class='mv3'>
    <div class='b'>Username:</div>
    <div>{{ if $.Username }}{{ $.Username }}{{ else }}<em>default user</em>{{ end }}</div>
  </div>
  <div class='mv3'>
    <div class='b'>Email:</div>
    <div>{{ $.Email }}</div>
  </div>
  <div class='mv3'>
    <div class='b'>Password:</div>
    <div><a href='/users/changepassword/'>change password</a></div>
  </div>
</fieldset>
<fieldset>
  <legend><h2 class='mh2 mv0'>Sites</h2></legend>
  <table class='mv2 collapse'>
    <thead>
      <tr class='bb h2'>
        <th>Site name</th>
        <th>Size</th>
      </tr>
    </thead>
    <tbody>
      {{- range $site := $.Sites }}
      <tr class='bb h2'>
        <td><a href='/{{ join "files" (sitePrefix $site.SiteName) }}/'>{{ if $site.SiteName }}{{ $site.SiteName }}{{ else }}<em>default site</em>{{ end }}</a></td>
        <td>{{ humanReadableFileSize $site.StorageUsed }}</td>
      </tr>
      {{- end }}
    </tbody>
    <tfoot>
      <tr>
        <td class='b tr h2'>Storage Used:</td>
        <td>{{ humanReadableFileSize $.StorageUsed }}{{ if gt $.StorageLimit 0 }} &frasl; {{ humanReadableFileSize $.StorageLimit }}{{ end }}</td>
      </tr>
    </tfoot>
  </table>
  <form method='post' action='/files/calculatestorage/' class='mv3'>
    {{- range $site := $.Sites }}
    <input type='hidden' name='siteName' value='{{ $site.SiteName }}'>
    {{- end }}
    <button type='submit' class='button ba ph3 br2 b--black pv1'>recalculate</button>
  </form>
</fieldset>
